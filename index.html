<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <title>SustAmbiTech - Tecnologia para Sustentabilidade Ambiental </title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Inclua o Leaflet CSS para o mapa -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        /* Estilos espec√≠ficos para o Carrossel */
        .carousel-container {
            position: relative;
            width: 100%;
            max-width: 900px; /* Ou o tamanho desejado */
            margin: 20px auto;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .carousel-slide {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .carousel-slide img {
            width: 100%;
            height: 400px; /* Altura fixa para as imagens do carrossel */
            object-fit: cover; /* Garante que a imagem preencha o espa√ßo sem distor√ß√£o */
            flex-shrink: 0; /* Impede que as imagens encolham */
            cursor: pointer;
        }

        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 24px;
            z-index: 10;
            border-radius: 5px;
        }

        .carousel-button.prev {
            left: 10px;
        }

        .carousel-button.next {
            right: 10px;
        }

        /* Estilos espec√≠ficos para o Mapa de Visualiza√ß√£o */
        .map-display-container {
            width: 100%;
            max-width: 900px; /* Ou o tamanho desejado */
            margin: 20px auto;
            padding: 20px;
            background-color: #697f3f; /* Cor de fundo para o container principal do mapa */
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        #mapaIndex {
            height: 450px; /* Altura do mapa no index */
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 15px;
        }

        /* NOVO: Estilos para o wrapper de legenda e clima */
        .map-info-and-climate-wrapper {
            display: flex;
            gap: 20px; /* Espa√ßo entre a legenda e o clima */
            margin-top: 20px;
            flex-wrap: wrap; /* Permite que os itens quebrem para a linha de baixo em telas menores */
            justify-content: center; /* Centraliza os itens quando eles quebram */
            align-items: flex-start; /* Alinha os itens ao topo */
        }

        /* NOVO: Estilos para a legenda e o container do clima */
        .map-info-and-climate-wrapper .map-legend,
        .map-info-and-climate-wrapper .climate-content-container {
            flex: 1; /* Permite que ambos cres√ßam e diminuam */
            min-width: 280px; /* Largura m√≠nima para cada item */
            background-color: #587029;
            border-radius: 8px;
            height: 450px;
            padding: 15px;
            border: 1px solid #587029;
            box-sizing: border-box;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: left; /* Garante que o texto dentro seja alinhado √† esquerda */
        }

        .map-display-container .map-legend h4,
        .climate-content-container h4 { /* Aplica ao h4 de ambos */
            color: #f0f0f0; /* Verde escuro para os t√≠tulos */
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 24px;
            text-align: left; /* Garante alinhamento √† esquerda */
        }

        .map-display-container .map-legend .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            font-size: 20px;
        }

        .map-display-container .map-legend .legend-color-box {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 2px solid #333;
            margin-right: 8px;
        }

        /* NOVO: Ajustes para o formul√°rio de clima injetado */
        .climate-content-container #form-clima {
            padding: 0; /* Remove padding extra se houver */
            background-color: transparent; /* Garante que n√£o tenha fundo extra */
            box-shadow: none; /* Remove sombra extra se houver */
        }
        /* Ajusta o h2 original do clima que agora √© um h4 dentro do container */
        .climate-content-container #form-clima h2 {
            display: none; /* Esconde o h2 original do clima se ele for carregado junto */
        }


        .map-display-container .map-action-section {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            color: #f0f0f0; /* Cor do texto no bot√£o de a√ß√£o */
        }

        .map-display-container .map-action-section h3 {
            color: #f0f0f0; /* Cor do texto no bot√£o de a√ß√£o */
            margin-bottom: 15px;
        }

        .map-display-container .map-action-button {
            display: inline-block;
            background-color: #4CAF50;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .map-display-container .map-action-button.locate-user {
            background-color: #2196F3;
        }
        .map-display-container .map-action-button.locate-user:hover {
            background-color: #0b7dda;
        }

        .map-display-container .map-action-button:hover {
            background-color: #45a049;
        }
        
        /* Responsividade para o novo layout de legenda/clima */
        @media (max-width: 768px) {
            .map-info-and-climate-wrapper {
                flex-direction: column; /* Empilha a legenda e o clima verticalmente em telas menores */
            }
            .map-info-and-climate-wrapper .map-legend,
            .map-info-and-climate-wrapper .climate-content-container {
                min-width: unset; /* Remove o min-width quando empilhado */
                width: 100%; /* Ocupa 100% da largura quando empilhado */
            }
            .carousel-slide img {
                height: 300px; /* Ajusta altura do carrossel para telas menores */
            }
        }
        @media (max-width: 480px) {
            .carousel-slide img {
                height: 200px; /* Ajusta altura do carrossel para telas muito pequenas */
            }
        }
    </style>
</head>
<div id="menu-container"></div>
<body>

    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <div class="hero-text">
                    <h1 id="heroTitle">Bem-vindo ao Futuro Verde</h1>
                    <p>Explore solu√ß√µes tecnol√≥gicas inovadoras para um mundo mais sustent√°vel. Juntos, podemos
                        construir um futuro melhor para as pr√≥ximas gera√ß√µes.</p>
                    <div class="hero-buttons">
                        <a id="heroRegisterBtn" href="register.html" class="btn btn-primary"
                            style="text-decoration: none;">Cadastre-se</a>
                        <a id="heroEditProfileBtn" href="edit-profile.html" class="btn btn-primary"
                            style="text-decoration: none; display: none;">Editar Perfil</a>
                        <a href="sobre.html" class="btn btn-secondary" style="text-decoration: none;">Saiba Mais</a>
                    </div>
                </div>
                <div class="hero-image">
                    <div class="hero-visual">
                        <div class="floating-element">üå±</div>
                        <div class="floating-element">‚ôªÔ∏è</div>
                        <div class="floating-element">üåç</div>
                        <div class="floating-element">üíö</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NOVO: Se√ß√£o do Mapa de Visualiza√ß√£o (Agora acima do Carrossel) -->
        <section class="map-section">
            <h2 style="text-align: center; color: #f0f0f0;">Ecopontos Pr√≥ximos de Voc√™</h2>
            <div class="map-display-container">
                <button id="btnLocateUserMap" class="map-action-button locate-user" style="margin-bottom: 15px;">Localizar Minha Posi√ß√£o</button>
                <div id="mapaIndex"></div>
                
                <!-- NOVO: Container flex√≠vel para Legenda e Clima -->
                <div class="map-info-and-climate-wrapper">
                    <div class="map-legend" id="mapIndexLegend">
                        <h4>Legenda</h4>
                        <!-- Itens da legenda ser√£o carregados via JS aqui -->
                    </div>
                    
                    <div class="climate-content-container">
                        <h4>Clima Local</h4>
                        <!-- O conte√∫do de clima.html ser√° injetado aqui via JS -->
                        <div id="form-clima"></div>
                    </div>
                </div>

                <div class="map-action-section">
                    <h3 id="addPointHeader">Quer adicionar um novo ponto?</h3>
                    <a id="addPointCallToAction" href="#" class="map-action-button"></a>
                </div>
            </div>
        </section>
        <br>
        
        <!-- Se√ß√£o do Clima Original (Removida daqui, seu conte√∫do agora est√° dentro da se√ß√£o do mapa) -->
        <!-- NOVO: Se√ß√£o do Carrossel de Imagens (Agora abaixo do Mapa) -->
        <section class="carousel-section">
            <h2 style="text-align: center; color: #f0f0f0;">Explore nossos Temas</h2>
            <div class="carousel-container" id="carouselContainer">
                <div class="carousel-slide" id="carouselSlide">
                    <!-- Imagens ser√£o carregadas via JS aqui -->
                </div>
                <button class="carousel-button prev" id="carouselPrevBtn">&#10094;</button>
                <button class="carousel-button next" id="carouselNextBtn">&#10095;</button>
            </div>
        </section>
        <br>

        <!-- Features Section (existente) -->
        <section class="features-section">
            <div class="container">
                <div class="section-header">
                    <h2>Mapeamento do Site</h2>
                    <p style="max-width: 1200px;">Clique em qualquer um dos cart√µes abaixo para navegar rapidamente para
                        a se√ß√£o desejada e explorar detalhes sobre nosso projeto, equipe, servi√ßos e muito mais.</p>
                </div>

                <div class="features-grid">
                    <a href="sobre.html" class="grid-item feature-card">
                        <div class="feature-icon">üåø</div>
                        <h3>Sobre Projeto</h3>
                        <p>Nossa miss√£o √© usar a tecnologia para impulsionar a sustentabilidade, criando um futuro mais
                            limpo e eficiente para todos.</p>
                    </a>

                    <a href="sobre.html#equipe" class="grid-item feature-card">
                        <div class="feature-icon">ü§ù</div>
                        <h3>Equipe do Projeto</h3>
                        <p>Conhe√ßa a equipe por tr√°s do projeto: um grupo de especialistas apaixonados por
                            sustentabilidade e inova√ß√£o tecnol√≥gica.</p>
                    </a>

                    <a href="servicos.html" class="grid-item feature-card">
                        <div class="feature-icon">üíº</div>
                        <h3>Servi√ßos</h3>
                        <p>Oferecemos uma gama de servi√ßos que inclui consultoria, implementa√ß√£o de sistemas e
                            monitoramento de projetos ambientais.</p>
                    </a>

                    <a href="#contato" class="grid-item feature-card">
                        <div class="feature-icon">üìû</div>
                        <h3>Contato</h3>
                        <p>Entre em contato conosco para saber mais sobre nossas solu√ß√µes, tirar d√∫vidas ou solicitar um
                            or√ßamento personalizado.</p>
                    </a>

                    <a href="servicos.html#monitoramento-ambiental" class="grid-item feature-card">
                        <div class="feature-icon">üìä</div>
                        <h3>Monitoramento Ambiental</h3>
                        <p>Utilizamos sensores e an√°lise de dados em tempo real para acompanhar e proteger a qualidade
                            do meio ambiente em diversas √°reas.</p>
                    </a>

                    <a href="servicos.html#economia-energia" class="grid-item feature-card">
                        <div class="feature-icon">‚ö°</div>
                        <h3>Economia de Energia</h3>
                        <p>Nossas solu√ß√µes de automa√ß√£o e efici√™ncia energ√©tica ajudam empresas e resid√™ncias a reduzir
                            o consumo e o impacto ambiental.</p>
                    </a>

                    <a href="servicos.html#reciclagem-inteligente" class="grid-item feature-card">
                        <div class="feature-icon">‚ôªÔ∏è</div>
                        <h3>Reciclagem Inteligente</div>
                        <p>Desenvolvemos sistemas automatizados que otimizam a coleta, triagem e o reprocessamento de
                            res√≠duos industriais e urbanos.</p>
                    </a>

                    <a href="servicos.html#mobilidade-sustentavel" class="grid-item feature-card">
                        <div class="feature-icon">üöó</div>
                        <h3>Mobilidade Sustent√°vel</div>
                        <p>Promovemos o uso de ve√≠culos el√©tricos e sistemas de transporte inteligentes para reduzir a
                            polui√ß√£o e a emiss√£o de carbono.</p>
                    </a>

                    <a href="servicos.html#consumo-consciente" class="grid-item feature-card">
                        <div class="feature-icon">üõçÔ∏è</div>
                        <h3>Consumo Consciente</div>
                        <p>Oferecemos ferramentas e informa√ß√µes para educar e incentivar o consumo de produtos e
                            servi√ßos que respeitam o meio ambiente.</p>
                    </a>

                    <a href="servicos.html#politicas-legislacao" class="grid-item feature-card">
                        <div class="feature-icon">‚öñÔ∏è</div>
                        <h3>Pol√≠ticas & Legisla√ß√£o</div>
                        <p>Detalhes sobre normas, leis e acordos internacionais que moldam as a√ß√µes de sustentabilidade
                            em n√≠vel global.</p>
                    </a>

                    <a href="servicos.html#educacao-verde" class="grid-item feature-card">
                        <div class="feature-icon">üéì</div>
                        <h3>Educa√ß√£o Verde</div>
                        <p>Conte√∫do educativo e workshops para capacitar indiv√≠duos e comunidades sobre a import√¢ncia da
                            sustentabilidade e da ecologia.</p>
                    </a>

                    <a href="fontes.html" class="grid-item feature-card">
                        <div class="feature-icon">üìö</div>
                        <h3>Fontes Bibliogr√°ficas</div>
                        <p>Confira a lista de refer√™ncias e estudos que fundamentam nossa pesquisa e desenvolvimento de
                            solu√ß√µes sustent√°veis.</p>
                    </a>
                </div>
            </div>
        </section>
        <div class="container">
        </div>
        <!-- Stats Section -->
        <section class="stats-section">
            <div class="container">
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">500+</div>
                        <div class="stat-label">Projetos Realizados</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">85%</div>
                        <div class="stat-label">Redu√ß√£o de CO‚ÇÇ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">1M+</div>
                        <div class="stat-label">kWh Economizados</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">200+</div>
                        <div class="stat-label">Empresas Parceiras</div>
                    </div>
                </div>
            </div>
        </section>
    </main>


    <div id="footer-container"></div>

    <!-- Script principal do seu aplicativo, agora centralizado -->
    <script src="main.js" type="module"></script>

    <!-- Script para carregar o rodap√© e o formul√°rio de clima -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer-container').innerHTML = data;
                })
                .catch(error => console.error('Erro ao carregar o rodap√©:', error));

            // MODIFICADO: O formul√°rio de clima agora √© injetado dentro de '.climate-content-container'
            fetch('clima.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('form-clima').innerHTML = data;
                    setupClimaForm(); // Chama a fun√ß√£o setupClimaForm AP√ìS o HTML ser inserido
                })
                .catch(error => console.error('Erro ao carregar o Formul√°rio de clima:', error));
        });
    </script>
    
    <!-- Script existente para o formul√°rio de clima (mantido e encapsulado) -->
    <script>
        function setupClimaForm() {
            const searchForm = document.querySelector('#search');
            if (!searchForm) {
                console.error('Elemento #search n√£o encontrado.');
                return;
            }

            searchForm.addEventListener('submit', async (event) => {
                event.preventDefault();

                const cityNameInput = document.querySelector('#city_name');
                if (!cityNameInput) return;
                
                const cityName = cityNameInput.value;

                if (!cityName) {
                    document.querySelector("#weather").classList.remove('show');
                    showAlert('Voc√™ precisa digitar uma cidade...');
                    return;
                }

                const apiKey = '8a60b2de14f7a17c7a11706b2cfcd87c'; // Use a sua chave de API real
                const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURI(cityName)}&appid=${apiKey}&units=metric&lang=pt_br`;

                try {
                    const results = await fetch(apiUrl);
                    const json = await results.json();

                    if (json.cod === 200) {
                        showInfo({
                            city: json.name,
                            country: json.sys.country,
                            temp: json.main.temp,
                            tempMax: json.main.temp_max,
                            tempMin: json.main.temp_min,
                            description: json.weather[0].description,
                            tempIcon: json.weather[0].icon,
                            windSpeed: json.wind.speed,
                            humidity: json.main.humidity,
                        });
                    } else {
                        document.querySelector("#weather").classList.remove('show');
                        showAlert(`
                            N√£o foi poss√≠vel localizar...
                            <img src="./img/404.svg"/>
                        `);
                    }
                } catch (error) {
                    console.error('Erro ao buscar dados do clima:', error);
                    document.querySelector("#weather").classList.remove('show');
                    showAlert('Erro ao conectar com a API. Tente novamente mais tarde.');
                }
            });

            function showInfo(json) {
                showAlert('');
                document.querySelector("#weather").classList.add('show');
                document.querySelector('#title').innerHTML = `${json.city}, ${json.country}`;
                document.querySelector('#temp_value').innerHTML = `${json.temp.toFixed(1).toString().replace('.', ',')} <sup>C¬∞</sup>`;
                document.querySelector('#temp_description').innerHTML = `${json.description}`;
                document.querySelector('#temp_img').setAttribute('src', `https://openweathermap.org/img/wn/${json.tempIcon}@2x.png`);
                document.querySelector('#temp_max').innerHTML = `${json.tempMax.toFixed(1).toString().replace('.', ',')} <sup>C¬∞</sup>`;
                document.querySelector('#temp_min').innerHTML = `${json.tempMin.toFixed(1).toString().replace('.', ',')} <sup>C¬∞</sup>`;
                document.querySelector('#humidity').innerHTML = `${json.humidity}%`;
                document.querySelector('#wind').innerHTML = `${json.windSpeed.toFixed(1)} km/h`;
            }

            function showAlert(msg) {
                const alertDiv = document.querySelector('#alert');
                if (alertDiv) {
                    alertDiv.innerHTML = msg;
                }
            }
        }
    </script>

    <!-- Leaflet JS, se ainda n√£o estiver carregado -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script> 
    <!-- NOVO: Script para a l√≥gica do carrossel e do mapa do index -->
    <script src="index-scripts.js" type="module"></script>

</body>

</html>
