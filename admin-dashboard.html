<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Ecopontos</title>
    <link rel="stylesheet" href="css/style.css"> 
</head>
<body>

    <header>
        <h1>Painel Administrativo de Ecopontos</h1>
        <nav>
            <a href="index.html">Ver Mapa</a>
            <a href="#" id="logoutBtn">Sair</a>
        </nav>
            <style>
                /* Estilos para a Seção de Edição Rápida (substitui o modal) */
.edit-section {
    background-color: #f7f7f7;
    border: 1px solid #ddd;
    padding: 20px 0; /* Padding vertical, o horizontal vem do .container */
    margin-top: 30px;
    margin-bottom: 30px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.edit-section h3 {
    border-bottom: 2px solid #007bff;
    padding-bottom: 10px;
    margin-bottom: 20px;
    color: #007bff;
}

/* Estilos gerais de formulário (se ainda não tiver) */
.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #333;
}

.edit-section input[type="text"],
.edit-section textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box; /* Garante que o padding não aumente a largura total */
}

.edit-section input:disabled {
    background-color: #eee;
    color: #777;
}

.form-actions {
    margin-top: 20px;
    display: flex;
    gap: 10px;
}

.btn-success, .btn-cancelar {
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
}

.btn-success {
    background-color: #28a745;
    color: white;
}

.btn-cancelar {
    background-color: #6c757d;
    color: white;
}
            </style>
    </header>

    <main>
        <div class="container">
            <p id="authStatusMessage" class="message-box info" style="display: none;"></p>

            <button id="btnAddNewPoint" class="btn-primary">Adicionar Novo Ponto Oficial</button>

            <h2>Sugestões Pendentes (Não Ativas)</h2>
            <p id="suggestionsMessageBox" class="message-box info" style="display: none;"></p>
            <div class="table-wrapper">
                <table id="suggestionsTable">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Tipo</th>
                            <th>Localização</th>
                            <th>Observações</th>
                            <th>Sugerido por</th>
                            <th class="actions">Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>

            <h2>Ecopontos Oficiais Ativos</h2>
            <p id="activePointsMessageBox" class="message-box info" style="display: none;"></p>
            <div class="table-wrapper">
                <table id="activePointsTable">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Tipo</th>
                            <th>Localização</th>
                            <th>Observações</th>
                            <th class="actions">Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>
            
        </div>
    </main>

    <section id="edit-ecoponto-section" class="edit-section" style="display: none;">
        <div class="container">
            <h3>Edição Rápida de Ecoponto Ativo</h3>
            <p id="editSectionMessageBox" class="message-box info" style="display: none;"></p>
            
            <form id="edit-ecoponto-form">
                <input type="hidden" id="edit-ecoponto-id" name="id">

                <div class="form-group">
                    <label for="edit-nome">Nome do Ponto:</label>
                    <input type="text" id="edit-nome" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-tipo">Tipo de Ponto:</label>
                    <input type="text" id="edit-tipo" required> 
                </div>

                <div class="form-group">
                    <label for="edit-localizacao">Endereço Simplificado:</label>
                    <input type="text" id="edit-localizacao" disabled title="Edição de endereço completo requer o Modal de Sugestão/Aprovação." placeholder="Rua, Bairro, Cidade (Somente Leitura)">
                </div>
                
                <div class="form-group">
                    <label for="edit-observacoes">Observações:</label>
                    <textarea id="edit-observacoes" rows="3"></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-success">Salvar Alterações</button>
                    <button type="button" class="btn-cancelar">Cancelar</button>
                </div>
            </form>
        </div>
    </section>

    <div id="pointModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modalTitle">Detalhes do Ponto de Coleta</h2>
            
            <p id="modalMessageBox" class="message-box error" style="display: none;"></p>

            <form id="pointForm">
                <input type="hidden" id="pointId">

                <fieldset class="creator-info">
                    <legend>Informações de Criação/Edição</legend>
                    <p>Usuário ID: <span id="display-usuarioId"></span></p>
                    <p>Data: <span id="display-data"></span></p>
                    <label for="modalEmail">Email do Sugeridor:</label>
                    <input type="email" id="modalEmail" disabled>
                </fieldset>

                <div class="form-group">
                    <label for="modalNome">Nome/Descrição Breve:</label>
                    <input type="text" id="modalNome" required>
                </div>
                
                <div class="form-group">
                    <label for="modalTipoPonto">Tipo de Material:</label>
                    <select id="modalTipoPonto" required>
                        <option value="">Selecione...</option>
                        <option value="Plástico">Plástico</option>
                        <option value="Vidro">Vidro</option>
                        <option value="Metal">Metal</option>
                        <option value="Papel">Papel</option>
                        <option value="Eletrônico">Eletrônico</option>
                        <option value="Outros">Outros (Especificar)</option>
                    </select>
                </div>
                <div class="form-group" style="display: none;">
                    <label for="modalOutrosEspecificar">Especifique "Outros":</label>
                    <input type="text" id="modalOutrosEspecificar" placeholder="Ex: Óleo de Cozinha Usado">
                </div>

                <fieldset>
                    <legend>Localização Geográfica</legend>
                    <div class="form-group">
                        <label for="modalCep">CEP:</label>
                        <input type="text" id="modalCep" maxlength="8">
                    </div>
                    <div class="form-row">
                        <div class="form-group half">
                            <label for="modalRua">Rua/Logradouro:</label>
                            <input type="text" id="modalRua" required>
                        </div>
                        <div class="form-group half">
                            <label for="modalNumero">Número:</label>
                            <input type="text" id="modalNumero">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group half">
                            <label for="modalBairro">Bairro:</label>
                            <input type="text" id="modalBairro">
                        </div>
                        <div class="form-group half">
                            <label for="modalCidade">Cidade:</label>
                            <input type="text" id="modalCidade" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group half">
                            <label for="modalEstado">Estado (UF):</label>
                            <input type="text" id="modalEstado" maxlength="2" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group half">
                            <label for="modalLatitude">Latitude:</label>
                            <input type="number" step="any" id="modalLatitude" required>
                        </div>
                        <div class="form-group half">
                            <label for="modalLongitude">Longitude:</label>
                            <input type="number" step="any" id="modalLongitude" required>
                        </div>
                    </div>
                </fieldset>
                
                <div class="form-group">
                    <label for="modalObservacoes">Observações Adicionais:</label>
                    <textarea id="modalObservacoes" rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label for="modalAtivo">Status do Ponto:</label>
                    <select id="modalAtivo" required>
                        <option value="true">Ativo (Público)</option>
                        <option value="false">Inativo (Sugestão/Rascunho)</option>
                    </select>
                </div>

                <button type="submit" id="modalSaveButton" class="btn-success">Salvar e Fechar</button>
            </form>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2024 Ecopontos. Todos os direitos reservados.</p>
    </footer>

    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/admin-dashboard.js"></script>
</body>
</html>